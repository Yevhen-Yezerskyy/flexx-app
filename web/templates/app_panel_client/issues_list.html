{% extends "app_panel_client/base.html" %}

{% block panel_where %}Emissionen{% endblock %}
{% block nav_issues_class %}text-[var(--accent)] font-semibold{% endblock %}

{% block panel_content %}
<div class="flex items-center mb-10 mt-2">
  <div class="text-2xl">Emissionen</div>
  <div class="flex-1"></div>
</div>

<div class="bg-white border border-gray-400 rounded-md overflow-hidden">
  <table class="w-full text-sm">
    <thead class="bg-gray-100">
      <tr class="text-left">
        <th class="px-4 py-3 w-[35%] text-[var(--accent)] font-semibold">Daten zur Emission</th>
        <th class="px-4 py-3 text-[var(--accent)] font-semibold">Dateien</th>
      </tr>
    </thead>
    <tbody>
      {% for it in issues %}
        <tr class="border-t border-gray-200 align-top">
          <td class="px-4 py-3">
            <div class="font-semibold">{{ it.title }}</div>
            <div class="grid grid-cols-[150px_minmax(0,1fr)] gap-x-2 gap-y-2 mt-2">
              <div>Ausgabedatum:</div><div>{{ it.issue_date|date:"d.m.Y" }}</div>
              <div>Zinssatz:</div><div>{{ it.interest_rate }}%</div>
              <div>Laufzeit:</div><div>{{ it.term_months }} Monate</div>
              <div>Preis pro Anleihe, €:</div><div>{{ it.bond_price_display }}</div>
              <div>Volumen, €:</div><div>{{ it.issue_volume_display }}</div>
              <div>Mindestmenge:</div><div>{{ it.minimal_bonds_quantity }}</div>
            </div>
          </td>
          <td class="px-4 py-3">
            {% if it.sorted_attachments %}
              <div class="flex flex-col gap-2">
                {% for a in it.sorted_attachments %}
                  <div>
                    {{ a.description|default:"Datei" }}:
                    <a href="{{ a.file.url }}" target="_blank" class="underline hover:text-[var(--accent)] transition" title="{{ a.filename }}">
                      {{ a.filename }}
                    </a>
                  </div>
                {% endfor %}
              </div>
            {% else %}
              <div class="text-gray-500">Keine Dateien</div>
            {% endif %}
            <div class="mt-3">
              <a href="#"
                 data-interest-modal-open
                 data-issue-id="{{ it.id }}"
                 class="underline hover:text-[var(--accent)] transition">
                Stückzinstabelle
              </a>
            </div>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td class="px-4 py-10 text-gray-500" colspan="2">Keine Emissionen vorhanden.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
