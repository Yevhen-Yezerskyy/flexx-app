{% extends "flexx/base.html" %}
<!-- FILE: web/templates/app_users/password_set.html
     PURPOSE: Единая страница для установки/смены пароля по одноразовой ссылке. -->
{% block content %}

<div class="flex flex-col items-center flex-1">
  <div class="text-2xl mb-10 mt-10">Passwort festlegen / ändern</div>

  <form method="post" class="w-[520px] flex flex-col gap-4">
    {% csrf_token %}

    {% if invalid %}
      <div class="text-sm border border-[var(--text)] rounded-md px-4 py-3 mb-4">
        Link ist ungültig oder abgelaufen.
      </div>
    {% else %}
      <div class="border border-[var(--text)] rounded-md px-4 py-2 mb-6">
        <div class="text-sm">E-Mail / Login:</div>
        <div class="font-semibold text-[var(--accent)]">{{ email }}</div>
      </div>

      <div class="flex flex-col gap-1">
        <input
          name="password1"
          type="password"
          placeholder="Neues Passwort"
          class="border border-[var(--text)] rounded-md px-4 py-2 focus:outline-none"
        >
        {% if form.password1.errors %}<div class="text-sm text-red-600">{{ form.password1.errors|join:", " }}</div>{% endif %}
      </div>

      <div class="flex flex-col gap-1 mb-6">
        <input
          name="password2"
          type="password"
          placeholder="Neues Passwort bestätigen"
          class="border border-[var(--text)] rounded-md px-4 py-2 focus:outline-none"
        >
        {% if form.password2.errors %}<div class="text-sm text-red-600">{{ form.password2.errors|join:", " }}</div>{% endif %}
      </div>

      {% if form.non_field_errors %}<div class="text-sm text-red-600">{{ form.non_field_errors|join:", " }}</div>{% endif %}

      <button class="rounded-md bg-[var(--accent)] text-white py-2 hover:brightness-110 transition">
        Speichern
      </button>
    {% endif %}
  </form>
</div>

{% endblock %}
