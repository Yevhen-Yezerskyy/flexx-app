{% extends "flexx/base.html" %}
<!-- FILE: web/templates/app_users/password_reset.html  (обновлено — 2026-02-13)
     PURPOSE: Reset по ссылке — email только показываем, пароль/подтверждение в стиле регистрации (accent + те же input-классы). -->
{% block content %}

<div class="flex flex-col items-center flex-1">
  <div class="text-2xl mb-10 mt-10">Passwort zurücksetzen</div>

  <form method="post" class="w-[520px] flex flex-col gap-4">
    {% csrf_token %}

    {% if not valid %}
      <div class="text-sm border border-[var(--text)] rounded-md px-4 py-3 mb-4">
        Link ist ungültig oder abgelaufen.
      </div>
    {% else %}

      <div class="flex flex-col gap-1 mb-8">
        <label class="text-sm">E-Mail:</label>
        <input
          value="{{ email }}"
          type="email"
          disabled
          class="border border-[var(--text)] rounded-md px-4 py-2 focus:outline-none opacity-70"
        >
      </div>

      {% if done %}
        <div class="text-sm border border-[var(--text)] rounded-md px-4 py-3 mb-4">
          Passwort wurde erfolgreich geändert.
        </div>
      {% else %}

        <div class="flex flex-col gap-1">
          <label class="text-sm">Passwort:</label>
          <input
            name="password1"
            type="password"
            class="border border-[var(--text)] rounded-md px-4 py-2 focus:outline-none"
          >
          {% if form.password1.errors %}<div class="text-sm text-red-600">{{ form.password1.errors|join:", " }}</div>{% endif %}
        </div>

        <div class="flex flex-col gap-1 mb-8">
          <label class="text-sm">Passwort bestätigen:</label>
          <input
            name="password2"
            type="password"
            class="border border-[var(--text)] rounded-md px-4 py-2 focus:outline-none"
          >
          {% if form.password2.errors %}<div class="text-sm text-red-600">{{ form.password2.errors|join:", " }}</div>{% endif %}
        </div>

        {% if form.non_field_errors %}<div class="text-sm text-red-600">{{ form.non_field_errors|join:", " }}</div>{% endif %}

        <button class="mt-4 rounded-md bg-[var(--accent)] text-white py-2 hover:brightness-110 transition">
          Speichern
        </button>

      {% endif %}
    {% endif %}
  </form>

  <div class="mt-auto mb-6 flex gap-6 text-sm underline">
    <a href="/" class="hover:text-[var(--accent)] transition">Zum Login</a>
  </div>
</div>

{% endblock %}
